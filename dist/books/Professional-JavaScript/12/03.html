<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>样式 | 一条放了盐的鱼</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="http://k3867d.coding-pages.com/fish.ico">
    <meta name="description" content="大前端笔记|前端博客|静态博客网站">
    <link rel="preload" href="/dist/assets/css/0.styles.f32a2a8c.css" as="style"><link rel="preload" href="/dist/assets/js/app.7b53bdad.js" as="script"><link rel="preload" href="/dist/assets/js/2.010eff74.js" as="script"><link rel="preload" href="/dist/assets/js/53.b6eeb97e.js" as="script"><link rel="prefetch" href="/dist/assets/js/10.8aaa5567.js"><link rel="prefetch" href="/dist/assets/js/100.3484c807.js"><link rel="prefetch" href="/dist/assets/js/101.6adb3f13.js"><link rel="prefetch" href="/dist/assets/js/102.2b150410.js"><link rel="prefetch" href="/dist/assets/js/103.e2832941.js"><link rel="prefetch" href="/dist/assets/js/104.71af8962.js"><link rel="prefetch" href="/dist/assets/js/105.6404ebed.js"><link rel="prefetch" href="/dist/assets/js/106.4ee09c4f.js"><link rel="prefetch" href="/dist/assets/js/107.ea632675.js"><link rel="prefetch" href="/dist/assets/js/108.64312a8b.js"><link rel="prefetch" href="/dist/assets/js/109.a5f04fba.js"><link rel="prefetch" href="/dist/assets/js/11.78ef211a.js"><link rel="prefetch" href="/dist/assets/js/110.81a10bab.js"><link rel="prefetch" href="/dist/assets/js/111.5cf497cb.js"><link rel="prefetch" href="/dist/assets/js/112.f120b4c7.js"><link rel="prefetch" href="/dist/assets/js/113.aa057c3f.js"><link rel="prefetch" href="/dist/assets/js/114.19acf4e8.js"><link rel="prefetch" href="/dist/assets/js/115.e4d28f81.js"><link rel="prefetch" href="/dist/assets/js/116.64cfe469.js"><link rel="prefetch" href="/dist/assets/js/117.cc28e7c0.js"><link rel="prefetch" href="/dist/assets/js/118.a6ac8cb8.js"><link rel="prefetch" href="/dist/assets/js/119.733df024.js"><link rel="prefetch" href="/dist/assets/js/12.c19f8794.js"><link rel="prefetch" href="/dist/assets/js/120.0ce60980.js"><link rel="prefetch" href="/dist/assets/js/121.f1e89329.js"><link rel="prefetch" href="/dist/assets/js/122.5c7ee225.js"><link rel="prefetch" href="/dist/assets/js/123.0140407e.js"><link rel="prefetch" href="/dist/assets/js/124.e09e9d18.js"><link rel="prefetch" href="/dist/assets/js/125.dcdf398a.js"><link rel="prefetch" href="/dist/assets/js/126.39ea9ab0.js"><link rel="prefetch" href="/dist/assets/js/127.a6b23809.js"><link rel="prefetch" href="/dist/assets/js/128.c7963256.js"><link rel="prefetch" href="/dist/assets/js/129.ed1cf8f5.js"><link rel="prefetch" href="/dist/assets/js/13.499dbc21.js"><link rel="prefetch" href="/dist/assets/js/130.441e44ba.js"><link rel="prefetch" href="/dist/assets/js/131.08183c0c.js"><link rel="prefetch" href="/dist/assets/js/132.2d8043e2.js"><link rel="prefetch" href="/dist/assets/js/133.e9bf6ba1.js"><link rel="prefetch" href="/dist/assets/js/134.e9c2c7e3.js"><link rel="prefetch" href="/dist/assets/js/135.2480957e.js"><link rel="prefetch" href="/dist/assets/js/136.31764858.js"><link rel="prefetch" href="/dist/assets/js/137.3029cc82.js"><link rel="prefetch" href="/dist/assets/js/138.cc60e5fa.js"><link rel="prefetch" href="/dist/assets/js/139.05681376.js"><link rel="prefetch" href="/dist/assets/js/14.d14c9a7d.js"><link rel="prefetch" href="/dist/assets/js/140.6cda105e.js"><link rel="prefetch" href="/dist/assets/js/141.31a7a036.js"><link rel="prefetch" href="/dist/assets/js/142.0c0ad6e3.js"><link rel="prefetch" href="/dist/assets/js/143.c6b9084b.js"><link rel="prefetch" href="/dist/assets/js/144.3b6d0d47.js"><link rel="prefetch" href="/dist/assets/js/145.56474214.js"><link rel="prefetch" href="/dist/assets/js/146.b56f07ae.js"><link rel="prefetch" href="/dist/assets/js/147.34101428.js"><link rel="prefetch" href="/dist/assets/js/148.abc7fa3e.js"><link rel="prefetch" href="/dist/assets/js/149.82775d0d.js"><link rel="prefetch" href="/dist/assets/js/15.5f81e66f.js"><link rel="prefetch" href="/dist/assets/js/150.92d01ce5.js"><link rel="prefetch" href="/dist/assets/js/151.c61b1bd4.js"><link rel="prefetch" href="/dist/assets/js/152.8884968f.js"><link rel="prefetch" href="/dist/assets/js/153.dd1c3f78.js"><link rel="prefetch" href="/dist/assets/js/154.c11d1644.js"><link rel="prefetch" href="/dist/assets/js/155.bb93fb82.js"><link rel="prefetch" href="/dist/assets/js/156.32bb3a0a.js"><link rel="prefetch" href="/dist/assets/js/157.f7b99dad.js"><link rel="prefetch" href="/dist/assets/js/158.b57ce33c.js"><link rel="prefetch" href="/dist/assets/js/159.41a72675.js"><link rel="prefetch" href="/dist/assets/js/16.48ea23bc.js"><link rel="prefetch" href="/dist/assets/js/160.a15f8dae.js"><link rel="prefetch" href="/dist/assets/js/161.0a659ace.js"><link rel="prefetch" href="/dist/assets/js/162.eaac510f.js"><link rel="prefetch" href="/dist/assets/js/163.dbe5e71b.js"><link rel="prefetch" href="/dist/assets/js/17.bbdb2496.js"><link rel="prefetch" href="/dist/assets/js/18.12143c8c.js"><link rel="prefetch" href="/dist/assets/js/19.81e4c56c.js"><link rel="prefetch" href="/dist/assets/js/20.db505e5a.js"><link rel="prefetch" href="/dist/assets/js/21.e7ce0406.js"><link rel="prefetch" href="/dist/assets/js/22.946a10d4.js"><link rel="prefetch" href="/dist/assets/js/23.1479da78.js"><link rel="prefetch" href="/dist/assets/js/24.b06bfda1.js"><link rel="prefetch" href="/dist/assets/js/25.f617ddf9.js"><link rel="prefetch" href="/dist/assets/js/26.44376412.js"><link rel="prefetch" href="/dist/assets/js/27.f2065ee3.js"><link rel="prefetch" href="/dist/assets/js/28.d1baf815.js"><link rel="prefetch" href="/dist/assets/js/29.654fde98.js"><link rel="prefetch" href="/dist/assets/js/3.50e94c9c.js"><link rel="prefetch" href="/dist/assets/js/30.7519d241.js"><link rel="prefetch" href="/dist/assets/js/31.5a27456e.js"><link rel="prefetch" href="/dist/assets/js/32.fc110bb1.js"><link rel="prefetch" href="/dist/assets/js/33.dcef99a1.js"><link rel="prefetch" href="/dist/assets/js/34.b809a286.js"><link rel="prefetch" href="/dist/assets/js/35.8461496b.js"><link rel="prefetch" href="/dist/assets/js/36.59d368d9.js"><link rel="prefetch" href="/dist/assets/js/37.f5af4803.js"><link rel="prefetch" href="/dist/assets/js/38.625c77a6.js"><link rel="prefetch" href="/dist/assets/js/39.ba6c05c3.js"><link rel="prefetch" href="/dist/assets/js/4.1f3a0c67.js"><link rel="prefetch" href="/dist/assets/js/40.0c905d54.js"><link rel="prefetch" href="/dist/assets/js/41.27977ca2.js"><link rel="prefetch" href="/dist/assets/js/42.856061a2.js"><link rel="prefetch" href="/dist/assets/js/43.3af46d52.js"><link rel="prefetch" href="/dist/assets/js/44.7671cf83.js"><link rel="prefetch" href="/dist/assets/js/45.0572ad2d.js"><link rel="prefetch" href="/dist/assets/js/46.51929115.js"><link rel="prefetch" href="/dist/assets/js/47.2416c365.js"><link rel="prefetch" href="/dist/assets/js/48.0c2268ea.js"><link rel="prefetch" href="/dist/assets/js/49.7ca51371.js"><link rel="prefetch" href="/dist/assets/js/5.0ab579a8.js"><link rel="prefetch" href="/dist/assets/js/50.b03da306.js"><link rel="prefetch" href="/dist/assets/js/51.496e333a.js"><link rel="prefetch" href="/dist/assets/js/52.6ea659fd.js"><link rel="prefetch" href="/dist/assets/js/54.61070ac2.js"><link rel="prefetch" href="/dist/assets/js/55.606fa2cc.js"><link rel="prefetch" href="/dist/assets/js/56.5fb32fbd.js"><link rel="prefetch" href="/dist/assets/js/57.f82e839c.js"><link rel="prefetch" href="/dist/assets/js/58.7ee89886.js"><link rel="prefetch" href="/dist/assets/js/59.3c855962.js"><link rel="prefetch" href="/dist/assets/js/6.b352b0b4.js"><link rel="prefetch" href="/dist/assets/js/60.ebee0245.js"><link rel="prefetch" href="/dist/assets/js/61.d8f3bac6.js"><link rel="prefetch" href="/dist/assets/js/62.71e1a344.js"><link rel="prefetch" href="/dist/assets/js/63.38626779.js"><link rel="prefetch" href="/dist/assets/js/64.d7723ef4.js"><link rel="prefetch" href="/dist/assets/js/65.d5cab5fe.js"><link rel="prefetch" href="/dist/assets/js/66.559aadd7.js"><link rel="prefetch" href="/dist/assets/js/67.f62e5e82.js"><link rel="prefetch" href="/dist/assets/js/68.73e74092.js"><link rel="prefetch" href="/dist/assets/js/69.1e4d8d85.js"><link rel="prefetch" href="/dist/assets/js/7.0d27bc10.js"><link rel="prefetch" href="/dist/assets/js/70.c9881da4.js"><link rel="prefetch" href="/dist/assets/js/71.166c77db.js"><link rel="prefetch" href="/dist/assets/js/72.700ad70a.js"><link rel="prefetch" href="/dist/assets/js/73.c482299f.js"><link rel="prefetch" href="/dist/assets/js/74.3d9caeba.js"><link rel="prefetch" href="/dist/assets/js/75.d4b2b84e.js"><link rel="prefetch" href="/dist/assets/js/76.96f6ea2f.js"><link rel="prefetch" href="/dist/assets/js/77.53071419.js"><link rel="prefetch" href="/dist/assets/js/78.df47ad42.js"><link rel="prefetch" href="/dist/assets/js/79.bd7f9f86.js"><link rel="prefetch" href="/dist/assets/js/8.5125eca2.js"><link rel="prefetch" href="/dist/assets/js/80.7dc30810.js"><link rel="prefetch" href="/dist/assets/js/81.00f5140e.js"><link rel="prefetch" href="/dist/assets/js/82.5dcaacc0.js"><link rel="prefetch" href="/dist/assets/js/83.6a3b41d3.js"><link rel="prefetch" href="/dist/assets/js/84.8044f1f6.js"><link rel="prefetch" href="/dist/assets/js/85.c274cc7a.js"><link rel="prefetch" href="/dist/assets/js/86.15aa0945.js"><link rel="prefetch" href="/dist/assets/js/87.af846f14.js"><link rel="prefetch" href="/dist/assets/js/88.b63d07c9.js"><link rel="prefetch" href="/dist/assets/js/89.4d24e4d5.js"><link rel="prefetch" href="/dist/assets/js/9.9fc83ee5.js"><link rel="prefetch" href="/dist/assets/js/90.a41c901b.js"><link rel="prefetch" href="/dist/assets/js/91.55e5d222.js"><link rel="prefetch" href="/dist/assets/js/92.df714ca6.js"><link rel="prefetch" href="/dist/assets/js/93.583277fd.js"><link rel="prefetch" href="/dist/assets/js/94.ee9477d8.js"><link rel="prefetch" href="/dist/assets/js/95.9d8a684f.js"><link rel="prefetch" href="/dist/assets/js/96.5fb5ee42.js"><link rel="prefetch" href="/dist/assets/js/97.3c5ca288.js"><link rel="prefetch" href="/dist/assets/js/98.8d9ba6ec.js"><link rel="prefetch" href="/dist/assets/js/99.f6ca9e3a.js">
    <link rel="stylesheet" href="/dist/assets/css/0.styles.f32a2a8c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dist/" class="home-link router-link-active"><!----> <span class="site-name">一条放了盐的鱼</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/wait.html" class="nav-link">
  待完善
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端书籍笔记" class="dropdown-title"><span class="title">前端书籍笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/books/Professional-JavaScript/01/01.html" class="nav-link">
  js高级程序设计(第三版)
</a></li></ul></div></div><div class="nav-item"><a href="/dist/youdaoNotes/" class="nav-link">
  有道云笔记
</a></div><div class="nav-item"><a href="/dist/logs/" class="nav-link">
  更新日志
</a></div><div class="nav-item"><a href="http://chenchunyang.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/chenchunyang123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/wait.html" class="nav-link">
  待完善
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端书籍笔记" class="dropdown-title"><span class="title">前端书籍笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/books/Professional-JavaScript/01/01.html" class="nav-link">
  js高级程序设计(第三版)
</a></li></ul></div></div><div class="nav-item"><a href="/dist/youdaoNotes/" class="nav-link">
  有道云笔记
</a></div><div class="nav-item"><a href="/dist/logs/" class="nav-link">
  更新日志
</a></div><div class="nav-item"><a href="http://chenchunyang.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/chenchunyang123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>一、js简介</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dist/books/Professional-JavaScript/01/01.html" class="sidebar-link">简介</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二、在HTMl中使用js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>三、基本概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>四、变量、作用域和内存</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>五、引用类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>六、面向对象的程序设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>七、函数表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>八、BOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>九、客户端检测</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>十、DOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>十一、DOM扩展</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>“DOM2 级样式”模块提供了一套 API。要确定浏览器是否支持 DOM2 级定义的 CSS 能力，可以使用下列代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> supportsDOM2CSS <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">'CSS'</span><span class="token punctuation">,</span> <span class="token string">'2.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> supportsDOM2CSS2 <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">'CSS2'</span><span class="token punctuation">,</span> <span class="token string">'2.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="访问元素的样式"><a href="#访问元素的样式" class="header-anchor">#</a> 访问元素的样式</h2> <p>任何支持 style 特性的 HTML 元素在 JavaScript 中都有一个对应的 style 属性。这个 style 对象是 CSSStyleDeclaration 的实例，包含着通过 HTML 的 style 特性指定的所有样式信息，但不包含与外部样式表或嵌入样式表经层叠而来的样式。在 style 特性中指定的任何 CSS 属性都将表现为这个 style 对象的相应属性。对于使用短划线（分隔不同的词汇，例如 background-image）的 CSS 属性名，必须将其转换成驼峰大小写形式，才能通过 JavaScript 来访问。下表列出了几个常见的 CSS 属性及其在 style 对象中对应的属性名：</p> <table><thead><tr><th>CSS 属性</th> <th>JavaScript 属性</th></tr></thead> <tbody><tr><td>background-image</td> <td>style.backgroundImage</td></tr> <tr><td>color</td> <td>style.color</td></tr> <tr><td>display</td> <td>style.display</td></tr> <tr><td>font-family</td> <td>style.fontFamily</td></tr></tbody></table> <p>多数情况下，都可以通过简单地转换属性名的格式来实现转换。其中一个不能直接转换的 CSS 属性就是 float。由于 float 是 JavaScript 中的保留字，因此不能用作属性名。“DOM2 级样式”规范规定样式对象上相应的属性名应该是 cssFloat；Firefox、Safari、Opera 和 Chrome 都支持这个属性，而 IE 支持的则是 styleFloat。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//设置背景颜色</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
<span class="token comment">//改变大小</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100px'</span><span class="token punctuation">;</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'200px'</span><span class="token punctuation">;</span>
<span class="token comment">//指定边框</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'1px solid black'</span><span class="token punctuation">;</span>
</code></pre></div><p>通过 style 对象同样可以取得在 style 特性中指定的样式。以下面的 HTML 代码为例：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span>blue<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span>10px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span>25px</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;blue&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;10px&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;25px&quot;</span>
</code></pre></div><h4 id="_1、dom-样式属性和方法"><a href="#_1、dom-样式属性和方法" class="header-anchor">#</a> 1、DOM 样式属性和方法</h4> <p>“DOM2 级样式”规范还为 style 对象定义了一些属性和方法。这些属性和方法在提供元素的 style 特性值的同时，也可以修改样式：</p> <ul><li>cssText：如前所述，通过它能够访问到 style 特性中的 CSS 代码。</li> <li>length：应用给元素的 CSS 属性的数量。</li> <li>parentRule：表示 CSS 信息的 CSSRule 对象。本节后面将讨论 CSSRule 类型。</li> <li>getPropertyCSSValue(propertyName)：返回包含给定属性值的 CSSValue 对象。</li> <li>getPropertyPriority(propertyName)：如果给定的属性使用了!important 设置，则返回&quot;important&quot;；否则，返回空字符串。</li> <li>getPropertyValue(propertyName)：返回给定属性的字符串值。</li> <li>item(index)：返回给定位置的 CSS 属性的名称。</li> <li>removeProperty(propertyName)：从样式中删除给定属性。</li> <li>setProperty(propertyName,value,priority)：将给定属性设置为相应的值，并加上优先权标志（&quot;important&quot;或者一个空字符串）。</li></ul> <p>通过 cssText 属性可以访问 style 特性中的 CSS 代码。在读取模式下，cssText 返回浏览器对 style 特性中 CSS 代码的内部表示。在写入模式下，赋给 cssText 的值会重写整个 style 特性的值：</p> <div class="language-js extra-class"><pre class="language-js"><code>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">'width: 25px; height: 100px; background-color: green'</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>设计 length 属性的目的，就是将其与 item()方法配套使用，以便迭代在元素中定义的 CSS 属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//或者 myDiv.style.item(i)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>无论是使用方括号语法还是使用 item()方法，都可以取得 CSS 属性名（&quot;background-color&quot;，不是&quot;backgroundColor&quot;）。然后，就可以在 getPropertyValue()中使用取得的属性名进一步取得属性的值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> i<span class="token punctuation">,</span> len<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  prop <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//或者 myDiv.style.item(i)</span>
  value <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>prop <span class="token operator">+</span> <span class="token string">' : '</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>getPropertyValue()方法取得的始终都是 CSS 属性值的字符串表示。如果你需要更多信息，可以使用 getPropertyCSSValue()方法，它返回一个包含两个属性的 CSSValue 对象，这两个属性分别是：cssText 和 cssValueType。其中，cssText 属性的值与 getPropertyValue()返回的值相同，而 cssValueType 属性则是一个数值常量，表示值的类型：0 表示继承的值，1 表示基本的值，2 表示值列表，3 表示自定义的值。以下代码既输出 CSS 属性值，也输出值的类型：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> i<span class="token punctuation">,</span> len<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  prop <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//或者 myDiv.style.item(i)</span>
  value <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">getPropertyCSSValue</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>prop <span class="token operator">+</span> <span class="token string">' : '</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>cssText <span class="token operator">+</span> <span class="token string">' ('</span> <span class="token operator">+</span> value<span class="token punctuation">.</span>cssValueType <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>要从元素的样式中移除某个 CSS 属性，需要使用 removeProperty()方法。例如，要移除通过 style 特性设置的 border 属性，可以使用下面的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">removeProperty</span><span class="token punctuation">(</span><span class="token string">'border'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在不确定某个给定的 CSS 属性拥有什么默认值的情况下，就可以使用这个方法。只要移除相应的属性，就可以为元素应用默认值。</p> <h4 id="_2、计算样式"><a href="#_2、计算样式" class="header-anchor">#</a> 2、计算样式</h4> <p>虽然 style 对象能够提供支持 style 特性的任何元素的样式信息，但它不包含那些从其他样式表层叠而来并影响到当前元素的样式信息。“DOM2 级样式”增强了 document.defaultView，提供了 getComputedStyle()方法。</p> <p>接受两个参数：要取得计算样式的元素和一个伪元素字符串（例如&quot;:after&quot;）。如果不需要伪元素信息，第二个参数可以是 null。</p> <p>返回一个 CSSStyleDeclaration 对象（与 style 属性的类型相同），其中包含当前元素的所有计算的样式。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Computed Styles Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
      <span class="token selector">#myDiv</span> <span class="token punctuation">{</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
      <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span> 1px solid black</span><span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> computedStyle <span class="token operator">=</span> document<span class="token punctuation">.</span>defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;red&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;100px&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;200px&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>border<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在某些浏览器中是&quot;1px solid black&quot;</span>
</code></pre></div><p>IE 不支持这个方法，但它有一种类似的概念。在 IE 中，每个具有 style 属性的元素还有一个 currentStyle 属性。这个属性是 CSSStyleDeclaration 的实例，包含当前元素全部计算后的样式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> computedStyle <span class="token operator">=</span> myDiv<span class="token punctuation">.</span>currentStyle<span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;red&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;100px&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;200px&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>border<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined,因为这是一个综合属性</span>
</code></pre></div><p>无论在哪个浏览器中，最重要的一条是要记住所有计算的样式都是只读的；不能修改计算后样式对象中的 CSS 属性。</p> <h2 id="操作样式表"><a href="#操作样式表" class="header-anchor">#</a> 操作样式表</h2> <p>使用下面的代码可以确定浏览器是否支持 DOM2 级样式表：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> supportsDOM2StyleSheets <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span>
  <span class="token string">'StyleSheets'</span><span class="token punctuation">,</span>
  <span class="token string">'2.0'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>CSSStyleSheet 继承自 StyleSheet，后者可以作为一个基础接口来定义非 CSS 样式表。从 StyleSheet 接口继承而来的属性如下：</p> <ul><li>disabled：表示样式表是否被禁用的布尔值。这个属性是可读/写的，将这个值设置为 true 可以禁用样式表。</li> <li>href：如果样式表是通过&lt;link&gt;包含的，则是样式表的 URL；否则，是 null。</li> <li>media：当前样式表支持的所有媒体类型的集合。与所有 DOM 集合一样，这个集合也有一个 length 属性和一个 item()方法。也可以使用方括号语法取得集合中特定的项。如果集合是空列表，表示样式表适用于所有媒体。在 IE 中，media 是一个反映&lt;link&gt;和&lt;style&gt;元素 media 特性值的字符串。</li> <li>ownerNode：指向拥有当前样式表的节点的指针，样式表可能是在 HTML 中通过&lt;link&gt;或&lt;style&gt;引入的（在 XML 中可能是通过处理指令引入的）。如果当前样式表是其他样式表通过@import 导入的，则这个属性值为 null。IE 不支持这个属性。</li> <li>parentStyleSheet：在当前样式表是通过@import 导入的情况下，这个属性是一个指向导入它的样式表的指针。</li> <li>title：ownerNode 中 title 属性的值。</li> <li>type：表示样式表类型的字符串。对 CSS 样式表而言，这个字符串是&quot;type/css&quot;。除 了 disabled 属性之外，其他属性都是只读的。在支持以上所有这些属性的基础上，CSSStyleSheet 类型还支持下列属性和方法：</li> <li>cssRules：样式表中包含的样式规则的集合。IE 不支持这个属性，但有一个类似的 rules 属性。</li> <li>ownerRule：如果样式表是通过@import 导入的，这个属性就是一个指针，指向表示导入的规则；否则，值为 null。IE 不支持这个属性。</li> <li>deleteRule(index)：删除 cssRules 集合中指定位置的规则。IE 不支持这个方法，但支持一个类似的 removeRule()方法。</li> <li>insertRule(rule,index)：向 cssRules 集合中指定的位置插入 rule 字符串。IE 不支持这个方法，但支持一个类似的 addRule()方法。</li></ul> <p>应用于文档的所有样式表是通过 document.styleSheets 集合来表示的。通过这个集合的 length 属性可以获知文档中样式表的数量，而通过方括号语法或 item()方法可以访问每一个样式表：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sheet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  sheet <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>sheet<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上代码可以输出文档中使用的每一个样式表的 href 属性（&lt;style&gt;元素包含的样式表没有 href 属性）。</p> <p>也可以直接通过&lt;link&gt;或&lt;style&gt;元素取得 CSSStyleSheet 对象。DOM 规定了一个包含 CSSStyleSheet 对象的属性，名叫 sheet；除了 IE，其他浏览器都支持这个属性。IE 支持的是 styleSheet 属性。下面是跨浏览器兼容写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getStyleSheet</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> element<span class="token punctuation">.</span>sheet <span class="token operator">||</span> element<span class="token punctuation">.</span>styleSheet<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//取得第一个&lt;link/&gt;元素引入的样式表</span>
<span class="token keyword">var</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sheet <span class="token operator">=</span> <span class="token function">getStylesheet</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_1、css-规则"><a href="#_1、css-规则" class="header-anchor">#</a> 1、CSS 规则</h4> <p>CSSRule 对象表示样式表中的每一条规则。实际上，CSSRule 是一个供其他多种类型继承的基类型，其中最常见的就是 CSSStyleRule 类型，表示样式信息（其他规则还有@import、@font-face、@page 和@charset，但这些规则很少有必要通过脚本来访问）。CSSStyleRule 对象包含下列属性：</p> <ul><li>cssText：返回整条规则对应的文本。由于浏览器对样式表的内部处理方式不同，返回的文本可能会与样式表中实际的文本不一样；Safari 始终都会将文本转换成全部小写。IE 不支持这个属性。</li> <li>parentRule：如果当前规则是导入的规则，这个属性引用的就是导入规则；否则，这个值为 null。IE 不支持这个属性。</li> <li>parentStyleSheet：当前规则所属的样式表。IE 不支持这个属性。</li> <li>selectorText：返回当前规则的选择符文本。由于浏览器对样式表的内部处理方式不同，返回的文本可能会与样式表中实际的文本不一样（例如，Safari 3 之前的版本始终会将文本转换成全部小写）。在 Firefox、Safari、Chrome 和 IE 中这个属性是只读的。Opera 允许修改 selectorText。 - style：一个 CSSStyleDeclaration 对象，可以通过它设置和取得规则中特定的样式值。</li> <li>type：表示规则类型的常量值。对于样式规则，这个值是 1。IE 不支持这个属性。</li></ul> <p>其中三个最常用的属性是 cssText、selectorText 和 style。cssText 属性与 style.cssText 属性类似，但并不相同。前者包含选择符文本和围绕样式信息的花括号，后者只包含样式信息（类似于元素的 style.cssText）。此外，cssText 是只读的，而 style.cssText 也可以被重写。</p> <p>大多数情况下，仅使用 style 属性就可以满足所有操作样式规则的需求了。这个对象就像每个元素上的 style 属性一样，可以通过它读取和修改规则中的样式信息。以下面的 CSS 规则为例。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div.box</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>假设这条规则位于页面中的第一个样式表中，而且这个样式表中只有这一条样式规则，那么通过下列代码可以取得这条规则的各种信息：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sheet <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rules <span class="token operator">=</span> sheet<span class="token punctuation">.</span>cssRules <span class="token operator">||</span> sheet<span class="token punctuation">.</span>rules<span class="token punctuation">;</span> <span class="token comment">//取得规则列表</span>
<span class="token keyword">var</span> rule <span class="token operator">=</span> rules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//取得第一条规则</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>selectorText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;div.box&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//完整的 CSS 代码</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;blue&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;100px&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;200px&quot;</span>
</code></pre></div><p>使用这种方式，可以像确定元素的行内样式信息一样，确定与规则相关的样式信息。与使用元素的方式一样，在这种方式下也可以修改样式信息，如下面的例子所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> sheet <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rules <span class="token operator">=</span> sheet<span class="token punctuation">.</span>cssRules <span class="token operator">||</span> sheet<span class="token punctuation">.</span>rules<span class="token punctuation">;</span> <span class="token comment">//取得规则列表</span>
<span class="token keyword">var</span> rule <span class="token operator">=</span> rules<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//取得第一条规则</span>
rule<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
</code></pre></div><p>必须要注意的是，以这种方式修改规则会影响页面中适用于该规则的所有元素。换句话说，如果有两个带有 box 类的&lt;div&gt;元素，那么这两个元素都会应用修改后的样式。</p> <h4 id="_2、创建规则"><a href="#_2、创建规则" class="header-anchor">#</a> 2、创建规则</h4> <p>需要使用 insertRule()方法。接受两个参数：规则文本和表示在哪里插入规则的索引。</p> <div class="language-js extra-class"><pre class="language-js"><code>sheet<span class="token punctuation">.</span><span class="token function">insertRule</span><span class="token punctuation">(</span><span class="token string">'body { background-color: silver }'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//DOM 方法</span>
</code></pre></div><p>这个例子插入的规则会改变元素的背景颜色。插入的规则将成为样式表中的第一条规则（插入到了位置 0）——规则的次序在确定层叠之后应用到文档的规则时至关重要。</p> <p>IE8 及更早版本支持一个类似的方法，名叫 addRule()，也接收两必选参数：选择符文本和 CSS 样式信息；一个可选参数：插入规则的位置。</p> <div class="language-js extra-class"><pre class="language-js"><code>sheet<span class="token punctuation">.</span><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'background-color: silver'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//仅对 IE 有效</span>
</code></pre></div><p>兼容性处理：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">insertRule</span><span class="token punctuation">(</span><span class="token parameter">sheet<span class="token punctuation">,</span> selectorText<span class="token punctuation">,</span> cssText<span class="token punctuation">,</span> position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sheet<span class="token punctuation">.</span>insertRule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sheet<span class="token punctuation">.</span><span class="token function">insertRule</span><span class="token punctuation">(</span>selectorText <span class="token operator">+</span> <span class="token string">'{'</span> <span class="token operator">+</span> cssText <span class="token operator">+</span> <span class="token string">'}'</span><span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sheet<span class="token punctuation">.</span>addRule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sheet<span class="token punctuation">.</span><span class="token function">addRule</span><span class="token punctuation">(</span>selectorText<span class="token punctuation">,</span> cssText<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用</span>
<span class="token function">insertRule</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'background-color: silver'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3、删除规则"><a href="#_3、删除规则" class="header-anchor">#</a> 3、删除规则</h4> <p>删除规则的方法是 deleteRule()，接受一个参数：要删除的规则的位置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 删除样式表中的第一条规则</span>
sheet<span class="token punctuation">.</span><span class="token function">deleteRule</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//DOM 方法</span>
</code></pre></div><p>IE 支持的类似方法叫 removeRule()，使用方法相同，如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code>sheet<span class="token punctuation">.</span><span class="token function">removeRule</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//仅对 IE 有效</span>
</code></pre></div><p>兼容处理：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deleteRule</span><span class="token punctuation">(</span><span class="token parameter">sheet<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sheet<span class="token punctuation">.</span>deleteRule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sheet<span class="token punctuation">.</span><span class="token function">deleteRule</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sheet<span class="token punctuation">.</span>removeRule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sheet<span class="token punctuation">.</span><span class="token function">removeRule</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 调用</span>
<span class="token function">deleteRule</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="元素大小"><a href="#元素大小" class="header-anchor">#</a> 元素大小</h2> <p>下面要介绍的属性和方法并不属于“DOM2 级样式”规范，但却与 HTML 元素的样式息息相关。</p> <h4 id="_1、偏移量"><a href="#_1、偏移量" class="header-anchor">#</a> 1、偏移量</h4> <p>通过下列 4 个属性可以取得元素的偏移量：</p> <ul><li>offsetHeight：元素在垂直方向上占用的空间大小，以像素计。包括元素的高度、（可见的）水平滚动条的高度、上边框高度和下边框高度。</li> <li>offsetWidth：元素在水平方向上占用的空间大小，以像素计。包括元素的宽度、（可见的）垂直滚动条的宽度、左边框宽度和右边框宽度。</li> <li>offsetLeft：元素的左外边框至包含元素的左内边框之间的像素距离。</li> <li>offsetTop：元素的上外边框至包含元素的上内边框之间的像素距离。</li></ul> <p>如下图展示了它们的关系：</p> <center><img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/12.2.3-1.png" alt=""></center> <p>要想知道某个元素在页面上的偏移量，将这个元素的 offsetLeft 和 offsetTop 与其 offsetParent 的相同属性相加，如此循环直至根元素，就可以得到一个基本准确的值，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 左偏移量</span>
<span class="token keyword">function</span> <span class="token function">getElementLeft</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> actualLeft <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
  <span class="token keyword">var</span> current <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    actualLeft <span class="token operator">+=</span> current<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
    current <span class="token operator">=</span> current<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> actualLeft<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 右偏移量</span>
<span class="token keyword">function</span> <span class="token function">getElementTop</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> actualTop <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> current <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    actualTop <span class="token operator">+=</span> current<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    current <span class="token operator">=</span> current<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> actualTop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注：所有这些偏移量属性都是只读的，而且每次访问它们都需要重新计算。因此，应该尽量避免重复访问这些属性；如果需要重复使用其中某些属性的值，可以将它们保存在局部变量中，以提高性能。</p> <h4 id="_2、客户区大小"><a href="#_2、客户区大小" class="header-anchor">#</a> 2、客户区大小</h4> <p>指的是元素内容及其内边距所占据的空间大小。有关客户区大小的属性有两个：clientWidth 和 clientHeight。其中，clientWidth 属性是元素内容区宽度加上左右内边距宽度；clientHeight 属性是元素内容区高度加上上下内边距高度。如下图所示：</p> <center><img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/12.2.3-2.png" alt=""></center> <p>要确定浏览器视口大小，可以使用 document.documentElement 或 document.body（在 IE7 之前的版本中）的 clientWidth 和 clientHeight：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">==</span> <span class="token string">'BackCompat'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      width<span class="token punctuation">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      width<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
      height<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3、滚动大小"><a href="#_3、滚动大小" class="header-anchor">#</a> 3、滚动大小</h4> <p>指的是包含滚动内容的元素的大小。</p> <p>以下是 4 个与滚动大小相关的属性：</p> <ul><li>scrollHeight：在没有滚动条的情况下，元素内容的总高度。</li> <li>scrollWidth：在没有滚动条的情况下，元素内容的总宽度。</li> <li>scrollLeft：被隐藏在内容区域左侧的像素数。通过设置这个属性可以改变元素的滚动位置。</li> <li>scrollTop：被隐藏在内容区域上方的像素数。通过设置这个属性可以改变元素的滚动位置。</li></ul> <p>如下图所示：</p> <center><img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/12.2.3-3.png" alt=""></center> <p>在确定文档的总高度时（包括基于视口的最小高度时），必须取得 scrollWidth/clientWidth 和 scrollHeight/clientHeight 中的最大值，才能保证在跨浏览器的环境下得到精确的结果。如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> docHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> docWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">,</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意，对于运行在混杂模式下的 IE，则需要用 document.body 代替 document.documentElement。</p> <p>通过 scrollLeft 和 scrollTop 属性既可以确定元素当前滚动的状态，也可以设置元素的滚动位置。如下是滚到顶部的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">scrollToTop</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>scrollTop <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4、确定元素大小"><a href="#_4、确定元素大小" class="header-anchor">#</a> 4、确定元素大小</h4> <p>用 getBoundingClientRect()方法。这个方法返回一个矩形对象，包含 4 个属性：left、top、right 和 bottom。这些属性给出了元素在页面中相对于视口的位置。但是，浏览器的实现稍有不同。IE8 及更早版本认为文档的左上角坐标是(2, 2)，而其他浏览器包括 IE9 则将传统的(0,0)作为起点坐标。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset <span class="token operator">!=</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> temp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    temp<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">'position:absolute;left:0;top:0;'</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token operator">-</span>temp<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">-</span> scrollTop<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    temp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> rect <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> offset <span class="token operator">=</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> offset<span class="token punctuation">,</span>
    right<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>right <span class="token operator">+</span> offset<span class="token punctuation">,</span>
    top<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> offset<span class="token punctuation">,</span>
    bottom<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>bottom <span class="token operator">+</span> offset<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个函数使用了它自身的属性来确定是否要对坐标进行调整。第一步是检测属性是否有定义，如果没有就定义一个。最终的 offset 会被设置为新元素上坐标的负值，实际上就是在 IE 中设置为 2，在 Firefox 和 Opera 中设置为 0。为此，需要创建一个临时的元素，将其位置设置在(0,0)，然后再调用其 getBoundingClientRect()。而之所以要减去视口的 scrollTop，是为了防止调用这个函数时窗口被滚动了。这样编写代码，就无需每次调用这个函数都执行两次 getBoundingClientRect()了。接下来，再在传入的元素上调用这个方法并基于新的计算公式创建一个对象。</p> <p>对于不支持 getBoundingClientRect()的浏览器，可以通过其他手段取得相同的信息。一般来说，right 和 left 的差值与 offsetWidth 的值相等，而 bottom 和 top 的差值与 offsetHeight 相等。而且，left 和 top 属性大致等于使用本章前面定义的 getElementLeft()和 getElementTop()函数取得的值。综合上述，就可以创建出下面这个跨浏览器的函数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
  <span class="token keyword">var</span> scrollLeft <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>getBoundingClientRect<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset <span class="token operator">!=</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> temp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      temp<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">'position:absolute;left:0;top:0;'</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
      arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token operator">-</span>temp<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">-</span> scrollTop<span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
      temp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> rect <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> offset <span class="token operator">=</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      left<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> offset<span class="token punctuation">,</span>
      right<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>right <span class="token operator">+</span> offset<span class="token punctuation">,</span>
      top<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> offset<span class="token punctuation">,</span>
      bottom<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>bottom <span class="token operator">+</span> offset<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> actualLeft <span class="token operator">=</span> <span class="token function">getElementLeft</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> actualTop <span class="token operator">=</span> <span class="token function">getElementTop</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      left<span class="token punctuation">:</span> actualLeft <span class="token operator">-</span> scrollLeft<span class="token punctuation">,</span>
      right<span class="token punctuation">:</span> actualLeft <span class="token operator">+</span> element<span class="token punctuation">.</span>offsetWidth <span class="token operator">-</span> scrollLeft<span class="token punctuation">,</span>
      top<span class="token punctuation">:</span> actualTop <span class="token operator">-</span> scrollTop<span class="token punctuation">,</span>
      bottom<span class="token punctuation">:</span> actualTop <span class="token operator">+</span> element<span class="token punctuation">.</span>offsetHeight <span class="token operator">-</span> scrollTop<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/4/2020, 5:05:13 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/dist/assets/js/app.7b53bdad.js" defer></script><script src="/dist/assets/js/2.010eff74.js" defer></script><script src="/dist/assets/js/53.b6eeb97e.js" defer></script>
  </body>
</html>
