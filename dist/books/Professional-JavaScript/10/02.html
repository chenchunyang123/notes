<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>节点层次 | 一条放了盐的鱼</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="http://k3867d.coding-pages.com/fish.ico">
    <meta name="description" content="大前端笔记|前端博客|静态博客网站">
    <link rel="preload" href="/dist/assets/css/0.styles.f32a2a8c.css" as="style"><link rel="preload" href="/dist/assets/js/app.7b53bdad.js" as="script"><link rel="preload" href="/dist/assets/js/2.010eff74.js" as="script"><link rel="preload" href="/dist/assets/js/45.0572ad2d.js" as="script"><link rel="prefetch" href="/dist/assets/js/10.8aaa5567.js"><link rel="prefetch" href="/dist/assets/js/100.3484c807.js"><link rel="prefetch" href="/dist/assets/js/101.6adb3f13.js"><link rel="prefetch" href="/dist/assets/js/102.2b150410.js"><link rel="prefetch" href="/dist/assets/js/103.e2832941.js"><link rel="prefetch" href="/dist/assets/js/104.71af8962.js"><link rel="prefetch" href="/dist/assets/js/105.6404ebed.js"><link rel="prefetch" href="/dist/assets/js/106.4ee09c4f.js"><link rel="prefetch" href="/dist/assets/js/107.ea632675.js"><link rel="prefetch" href="/dist/assets/js/108.64312a8b.js"><link rel="prefetch" href="/dist/assets/js/109.a5f04fba.js"><link rel="prefetch" href="/dist/assets/js/11.78ef211a.js"><link rel="prefetch" href="/dist/assets/js/110.81a10bab.js"><link rel="prefetch" href="/dist/assets/js/111.5cf497cb.js"><link rel="prefetch" href="/dist/assets/js/112.f120b4c7.js"><link rel="prefetch" href="/dist/assets/js/113.aa057c3f.js"><link rel="prefetch" href="/dist/assets/js/114.19acf4e8.js"><link rel="prefetch" href="/dist/assets/js/115.e4d28f81.js"><link rel="prefetch" href="/dist/assets/js/116.64cfe469.js"><link rel="prefetch" href="/dist/assets/js/117.cc28e7c0.js"><link rel="prefetch" href="/dist/assets/js/118.a6ac8cb8.js"><link rel="prefetch" href="/dist/assets/js/119.733df024.js"><link rel="prefetch" href="/dist/assets/js/12.c19f8794.js"><link rel="prefetch" href="/dist/assets/js/120.0ce60980.js"><link rel="prefetch" href="/dist/assets/js/121.f1e89329.js"><link rel="prefetch" href="/dist/assets/js/122.5c7ee225.js"><link rel="prefetch" href="/dist/assets/js/123.0140407e.js"><link rel="prefetch" href="/dist/assets/js/124.e09e9d18.js"><link rel="prefetch" href="/dist/assets/js/125.dcdf398a.js"><link rel="prefetch" href="/dist/assets/js/126.39ea9ab0.js"><link rel="prefetch" href="/dist/assets/js/127.a6b23809.js"><link rel="prefetch" href="/dist/assets/js/128.c7963256.js"><link rel="prefetch" href="/dist/assets/js/129.ed1cf8f5.js"><link rel="prefetch" href="/dist/assets/js/13.499dbc21.js"><link rel="prefetch" href="/dist/assets/js/130.441e44ba.js"><link rel="prefetch" href="/dist/assets/js/131.08183c0c.js"><link rel="prefetch" href="/dist/assets/js/132.2d8043e2.js"><link rel="prefetch" href="/dist/assets/js/133.e9bf6ba1.js"><link rel="prefetch" href="/dist/assets/js/134.e9c2c7e3.js"><link rel="prefetch" href="/dist/assets/js/135.2480957e.js"><link rel="prefetch" href="/dist/assets/js/136.31764858.js"><link rel="prefetch" href="/dist/assets/js/137.3029cc82.js"><link rel="prefetch" href="/dist/assets/js/138.cc60e5fa.js"><link rel="prefetch" href="/dist/assets/js/139.05681376.js"><link rel="prefetch" href="/dist/assets/js/14.d14c9a7d.js"><link rel="prefetch" href="/dist/assets/js/140.6cda105e.js"><link rel="prefetch" href="/dist/assets/js/141.31a7a036.js"><link rel="prefetch" href="/dist/assets/js/142.0c0ad6e3.js"><link rel="prefetch" href="/dist/assets/js/143.c6b9084b.js"><link rel="prefetch" href="/dist/assets/js/144.3b6d0d47.js"><link rel="prefetch" href="/dist/assets/js/145.56474214.js"><link rel="prefetch" href="/dist/assets/js/146.b56f07ae.js"><link rel="prefetch" href="/dist/assets/js/147.34101428.js"><link rel="prefetch" href="/dist/assets/js/148.abc7fa3e.js"><link rel="prefetch" href="/dist/assets/js/149.82775d0d.js"><link rel="prefetch" href="/dist/assets/js/15.5f81e66f.js"><link rel="prefetch" href="/dist/assets/js/150.92d01ce5.js"><link rel="prefetch" href="/dist/assets/js/151.c61b1bd4.js"><link rel="prefetch" href="/dist/assets/js/152.8884968f.js"><link rel="prefetch" href="/dist/assets/js/153.dd1c3f78.js"><link rel="prefetch" href="/dist/assets/js/154.c11d1644.js"><link rel="prefetch" href="/dist/assets/js/155.bb93fb82.js"><link rel="prefetch" href="/dist/assets/js/156.32bb3a0a.js"><link rel="prefetch" href="/dist/assets/js/157.f7b99dad.js"><link rel="prefetch" href="/dist/assets/js/158.b57ce33c.js"><link rel="prefetch" href="/dist/assets/js/159.41a72675.js"><link rel="prefetch" href="/dist/assets/js/16.48ea23bc.js"><link rel="prefetch" href="/dist/assets/js/160.a15f8dae.js"><link rel="prefetch" href="/dist/assets/js/161.0a659ace.js"><link rel="prefetch" href="/dist/assets/js/162.eaac510f.js"><link rel="prefetch" href="/dist/assets/js/163.dbe5e71b.js"><link rel="prefetch" href="/dist/assets/js/17.bbdb2496.js"><link rel="prefetch" href="/dist/assets/js/18.12143c8c.js"><link rel="prefetch" href="/dist/assets/js/19.81e4c56c.js"><link rel="prefetch" href="/dist/assets/js/20.db505e5a.js"><link rel="prefetch" href="/dist/assets/js/21.e7ce0406.js"><link rel="prefetch" href="/dist/assets/js/22.946a10d4.js"><link rel="prefetch" href="/dist/assets/js/23.1479da78.js"><link rel="prefetch" href="/dist/assets/js/24.b06bfda1.js"><link rel="prefetch" href="/dist/assets/js/25.f617ddf9.js"><link rel="prefetch" href="/dist/assets/js/26.44376412.js"><link rel="prefetch" href="/dist/assets/js/27.f2065ee3.js"><link rel="prefetch" href="/dist/assets/js/28.d1baf815.js"><link rel="prefetch" href="/dist/assets/js/29.654fde98.js"><link rel="prefetch" href="/dist/assets/js/3.50e94c9c.js"><link rel="prefetch" href="/dist/assets/js/30.7519d241.js"><link rel="prefetch" href="/dist/assets/js/31.5a27456e.js"><link rel="prefetch" href="/dist/assets/js/32.fc110bb1.js"><link rel="prefetch" href="/dist/assets/js/33.dcef99a1.js"><link rel="prefetch" href="/dist/assets/js/34.b809a286.js"><link rel="prefetch" href="/dist/assets/js/35.8461496b.js"><link rel="prefetch" href="/dist/assets/js/36.59d368d9.js"><link rel="prefetch" href="/dist/assets/js/37.f5af4803.js"><link rel="prefetch" href="/dist/assets/js/38.625c77a6.js"><link rel="prefetch" href="/dist/assets/js/39.ba6c05c3.js"><link rel="prefetch" href="/dist/assets/js/4.1f3a0c67.js"><link rel="prefetch" href="/dist/assets/js/40.0c905d54.js"><link rel="prefetch" href="/dist/assets/js/41.27977ca2.js"><link rel="prefetch" href="/dist/assets/js/42.856061a2.js"><link rel="prefetch" href="/dist/assets/js/43.3af46d52.js"><link rel="prefetch" href="/dist/assets/js/44.7671cf83.js"><link rel="prefetch" href="/dist/assets/js/46.51929115.js"><link rel="prefetch" href="/dist/assets/js/47.2416c365.js"><link rel="prefetch" href="/dist/assets/js/48.0c2268ea.js"><link rel="prefetch" href="/dist/assets/js/49.7ca51371.js"><link rel="prefetch" href="/dist/assets/js/5.0ab579a8.js"><link rel="prefetch" href="/dist/assets/js/50.b03da306.js"><link rel="prefetch" href="/dist/assets/js/51.496e333a.js"><link rel="prefetch" href="/dist/assets/js/52.6ea659fd.js"><link rel="prefetch" href="/dist/assets/js/53.b6eeb97e.js"><link rel="prefetch" href="/dist/assets/js/54.61070ac2.js"><link rel="prefetch" href="/dist/assets/js/55.606fa2cc.js"><link rel="prefetch" href="/dist/assets/js/56.5fb32fbd.js"><link rel="prefetch" href="/dist/assets/js/57.f82e839c.js"><link rel="prefetch" href="/dist/assets/js/58.7ee89886.js"><link rel="prefetch" href="/dist/assets/js/59.3c855962.js"><link rel="prefetch" href="/dist/assets/js/6.b352b0b4.js"><link rel="prefetch" href="/dist/assets/js/60.ebee0245.js"><link rel="prefetch" href="/dist/assets/js/61.d8f3bac6.js"><link rel="prefetch" href="/dist/assets/js/62.71e1a344.js"><link rel="prefetch" href="/dist/assets/js/63.38626779.js"><link rel="prefetch" href="/dist/assets/js/64.d7723ef4.js"><link rel="prefetch" href="/dist/assets/js/65.d5cab5fe.js"><link rel="prefetch" href="/dist/assets/js/66.559aadd7.js"><link rel="prefetch" href="/dist/assets/js/67.f62e5e82.js"><link rel="prefetch" href="/dist/assets/js/68.73e74092.js"><link rel="prefetch" href="/dist/assets/js/69.1e4d8d85.js"><link rel="prefetch" href="/dist/assets/js/7.0d27bc10.js"><link rel="prefetch" href="/dist/assets/js/70.c9881da4.js"><link rel="prefetch" href="/dist/assets/js/71.166c77db.js"><link rel="prefetch" href="/dist/assets/js/72.700ad70a.js"><link rel="prefetch" href="/dist/assets/js/73.c482299f.js"><link rel="prefetch" href="/dist/assets/js/74.3d9caeba.js"><link rel="prefetch" href="/dist/assets/js/75.d4b2b84e.js"><link rel="prefetch" href="/dist/assets/js/76.96f6ea2f.js"><link rel="prefetch" href="/dist/assets/js/77.53071419.js"><link rel="prefetch" href="/dist/assets/js/78.df47ad42.js"><link rel="prefetch" href="/dist/assets/js/79.bd7f9f86.js"><link rel="prefetch" href="/dist/assets/js/8.5125eca2.js"><link rel="prefetch" href="/dist/assets/js/80.7dc30810.js"><link rel="prefetch" href="/dist/assets/js/81.00f5140e.js"><link rel="prefetch" href="/dist/assets/js/82.5dcaacc0.js"><link rel="prefetch" href="/dist/assets/js/83.6a3b41d3.js"><link rel="prefetch" href="/dist/assets/js/84.8044f1f6.js"><link rel="prefetch" href="/dist/assets/js/85.c274cc7a.js"><link rel="prefetch" href="/dist/assets/js/86.15aa0945.js"><link rel="prefetch" href="/dist/assets/js/87.af846f14.js"><link rel="prefetch" href="/dist/assets/js/88.b63d07c9.js"><link rel="prefetch" href="/dist/assets/js/89.4d24e4d5.js"><link rel="prefetch" href="/dist/assets/js/9.9fc83ee5.js"><link rel="prefetch" href="/dist/assets/js/90.a41c901b.js"><link rel="prefetch" href="/dist/assets/js/91.55e5d222.js"><link rel="prefetch" href="/dist/assets/js/92.df714ca6.js"><link rel="prefetch" href="/dist/assets/js/93.583277fd.js"><link rel="prefetch" href="/dist/assets/js/94.ee9477d8.js"><link rel="prefetch" href="/dist/assets/js/95.9d8a684f.js"><link rel="prefetch" href="/dist/assets/js/96.5fb5ee42.js"><link rel="prefetch" href="/dist/assets/js/97.3c5ca288.js"><link rel="prefetch" href="/dist/assets/js/98.8d9ba6ec.js"><link rel="prefetch" href="/dist/assets/js/99.f6ca9e3a.js">
    <link rel="stylesheet" href="/dist/assets/css/0.styles.f32a2a8c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/dist/" class="home-link router-link-active"><!----> <span class="site-name">一条放了盐的鱼</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dist/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/wait.html" class="nav-link">
  待完善
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端书籍笔记" class="dropdown-title"><span class="title">前端书籍笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/books/Professional-JavaScript/01/01.html" class="nav-link">
  js高级程序设计(第三版)
</a></li></ul></div></div><div class="nav-item"><a href="/dist/youdaoNotes/" class="nav-link">
  有道云笔记
</a></div><div class="nav-item"><a href="/dist/logs/" class="nav-link">
  更新日志
</a></div><div class="nav-item"><a href="http://chenchunyang.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/chenchunyang123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dist/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/wait.html" class="nav-link">
  待完善
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端书籍笔记" class="dropdown-title"><span class="title">前端书籍笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dist/books/Professional-JavaScript/01/01.html" class="nav-link">
  js高级程序设计(第三版)
</a></li></ul></div></div><div class="nav-item"><a href="/dist/youdaoNotes/" class="nav-link">
  有道云笔记
</a></div><div class="nav-item"><a href="/dist/logs/" class="nav-link">
  更新日志
</a></div><div class="nav-item"><a href="http://chenchunyang.site/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我的博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/chenchunyang123" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>一、js简介</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二、在HTMl中使用js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>三、基本概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>四、变量、作用域和内存</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>五、引用类型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>六、面向对象的程序设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>七、函数表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>八、BOM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>九、客户端检测</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>十、DOM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dist/books/Professional-JavaScript/10/01.html" class="sidebar-link">简介</a></li><li><a href="/dist/books/Professional-JavaScript/10/02.html" class="active sidebar-link">节点层次</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#node-类型" class="sidebar-link">Node 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#document-类型" class="sidebar-link">Document 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#element-类型" class="sidebar-link">Element 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#text-类型" class="sidebar-link">Text 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#comment-类型" class="sidebar-link">Comment 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#cdatasection-类型" class="sidebar-link">CDATASection 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#documenttype-类型" class="sidebar-link">DocumentType 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#documentfragment-类型" class="sidebar-link">DocumentFragment 类型</a></li><li class="sidebar-sub-header"><a href="/dist/books/Professional-JavaScript/10/02.html#attr-类型" class="sidebar-link">Attr 类型</a></li></ul></li><li><a href="/dist/books/Professional-JavaScript/10/03.html" class="sidebar-link">DOM操作技术</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>十一、DOM扩展</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>DOM 可以将任何 HTML 或 XML 文档描绘成一个由多层节点构成的结构。节点分为几种不同的类型，每种类型分别表示文档中不同的信息及（或）标记。每个节点都拥有各自的特点、数据和方法，另外也与其他节点存在某种关系。节点之间的关系构成了层次，而所有页面标记则表现为一个以特定节点为根节点的树形结构。</p> <p>见如下 HTML：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Sample Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以将这个简单的 HTML 文档表示为一个层次结构，如图：</p> <center><img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/10.1.1-1.png" alt=""></center> <p>文档节点是每个文档的根节点。在这个例子中，文档节点只有一个子节点，即</p><html>元素，我们称之为文档元素。文档元素是文档的最外层元素，文档中的其他所有元素都包含在文档元素中。每个文档只能有一个文档元素。<p></p> <p>每一段标记都可以通过树中的一个节点来表示：HTML 元素通过元素节点表示，特性（attribute）通过特性节点表示，文档类型通过文档类型节点表示，而注释则通过注释节点表示。总共有 12 种节点类型，这些类型都继承自一个基类型。</p> <h2 id="node-类型"><a href="#node-类型" class="header-anchor">#</a> Node 类型</h2> <p>DOM1 级定义了一个 Node 接口，该接口将由 DOM 中的所有节点类型实现。JavaScript 中的所有节点类型都继承自 Node 类型，因此所有节点类型都共享着相同的基本属性和方法。</p> <p>每个节点都有一个 nodeType 属性，用于表明节点的类型。节点类型由在 Node 类型中定义的下列 12 个数值常量来表示，任何节点类型必居其一：</p> <ul><li>Node.ELEMENT_NODE(1)；</li> <li>Node.ATTRIBUTE_NODE(2)；</li> <li>Node.TEXT_NODE(3)；</li> <li>Node.CDATA_SECTION_NODE(4)；</li> <li>Node.ENTITY_REFERENCE_NODE(5)；</li> <li>Node.ENTITY_NODE(6)；</li> <li>Node.PROCESSING_INSTRUCTION_NODE(7)；</li> <li>Node.COMMENT_NODE(8)；</li> <li>Node.DOCUMENT_NODE(9)；</li> <li>Node.DOCUMENT_TYPE_NODE(10)；</li> <li>Node.DOCUMENT_FRAGMENT_NODE(11)；</li> <li>Node.NOTATION_NODE(12)。</li></ul> <p>通过比较上面这些常量，可以很容易地确定节点的类型，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> Node<span class="token punctuation">.</span><span class="token constant">ELEMENT_NODE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//在低版本IE中报错，没有公开 Node 类型的构造函数</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Node is an element.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>为了兼容所有浏览器可以写成：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//适用于所有浏览器</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Node is an element.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_1、nodename-和-nodevalue-属性"><a href="#_1、nodename-和-nodevalue-属性" class="header-anchor">#</a> 1、nodeName 和 nodeValue 属性</h4> <p>要了解节点的具体信息，可以使用 nodeName 和 nodeValue 这两个属性。这两个属性的值完全取决于节点的类型。</p> <p>对于元素节点，nodeName 中保存的始终都是元素的标签名，而 nodeValue 的值则始终为 null。</p> <h4 id="_2、节点关系"><a href="#_2、节点关系" class="header-anchor">#</a> 2、节点关系</h4> <p>每个节点都有一个 childNodes 属性，其中保存着一个 NodeList 对象。NodeList 是一种类数组对象，用于保存一组有序的节点，可以通过位置来访问这些节点。</p> <p>下面的例子展示了如何访问保存在 NodeList 中的节点——可以通过方括号，也可以使用 item()方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> firstChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> secondChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</code></pre></div><p>如果想把 NodeList 转为数组：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">convertToArray</span><span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    array <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//针对高级浏览器</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 针对IE8及以下的浏览器</span>
    array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> array<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <p>每个节点都有一个 parentNode 属性，该属性指向文档树中的父节点。包含在 childNodes 列表中的每个节点相互之间都是同胞节点，可通过列表中每个节点的 previousSibling 和 nextSibling 属性，访问其他节点。列表中第一个节点的 previousSibling 属性值为 null，列表中最后一个节点的 nextSibling 属性的值同样也为 null。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>nextSibling <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Last node in the parent’s childNodes list.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>previousSibling <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'First node in the parent’s childNodes list.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <p>父节点的 firstChild 和 lastChild 属性分别指向其 childNodes 列表中的第一个和最后一个节点。</p> <div class="language-js extra-class"><pre class="language-js"><code>someNode<span class="token punctuation">.</span>firstChild <span class="token operator">===</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
someNode<span class="token punctuation">.</span>lastChild <span class="token operator">===</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>如果没有子节点，则 firstChild 和 lastChild 为 null。</p> <p>下图展示了上面所说的这些关系：</p> <center><img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/10.1.1-2.png" alt=""></center> <hr> <p>hasChildNodes()：节点包含一或多个子节点的情况下返回 true。</p> <p>ownerDocument 属性：指向表示整个文档的文档节点。</p> <h4 id="_3、操作节点"><a href="#_3、操作节点" class="header-anchor">#</a> 3、操作节点</h4> <ul><li><p>appendChild()</p> <p>用于向 childNodes 列表的末尾添加一个节点。返回新增的节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>returnedNode <span class="token operator">==</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>lastChild <span class="token operator">==</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><p>任何 DOM 节点不能同时出现在文档中的多个位置上，如果在调用 appendChild()时传入了父节点的第一个子节点，那么该节点就会成为父节点的最后一个子节点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//someNode 有多个子节点</span>
<span class="token keyword">var</span> returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>returnedNode <span class="token operator">==</span> someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
<span class="token function">alert</span><span class="token punctuation">(</span>returnedNode <span class="token operator">==</span> someNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div></li> <li><p>insertBefore()</p> <p>把节点放在 childNodes 列表中某个特定的位置上，接受两个参数：要插入的节点和作为参照的节点。如果参照节点是 null，则 insertBefore()与 appendChild()执行相同的操作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//插入后成为最后一个子节点</span>
returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>newNode <span class="token operator">==</span> someNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token comment">//插入后成为第一个子节点</span>
<span class="token keyword">var</span> returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>returnedNode <span class="token operator">==</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>newNode <span class="token operator">==</span> someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token comment">//插入到最后一个子节点前面</span>
returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> someNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>newNode <span class="token operator">==</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div></li> <li><p>replaceChild()</p> <p>替换的节点将由这个方法返回并从文档树中被移除，同时由要插入的节点占据其位置。两个参数是：要插入的节点和要替换的节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//替换第一个子节点</span>
<span class="token keyword">var</span> returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//替换最后一个子节点</span>
returnedNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> someNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>removeChild()</p> <p>移除节点。一个参数：要移除的节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//移除第一个子节点</span>
<span class="token keyword">var</span> formerFirstChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//移除最后一个子节点</span>
<span class="token keyword">var</span> formerLastChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p>上述这四个方法必须在支持子节点的节点上调用，否则会报错。</p> <h4 id="_4、其他方法"><a href="#_4、其他方法" class="header-anchor">#</a> 4、其他方法</h4> <p>另外两个所有类型的节点都有的方法：</p> <ul><li><p>cloneNode()</p> <p>用于创建调用这个方法的节点的一个完全相同的副本。接受一个布尔值参数，表示是否执行深复制。在参数为 true 的情况下，执行深复制，也就是复制节点及其整个子节点树；在参数为 false 的情况下，执行浅复制，即只复制节点本身。</p></li> <li><p>normalize()</p> <p>处理文档树中的文本节点。由于解析器的实现或 DOM 操作等原因，可能会出现文本节点不包含文本，或者接连出现两个文本节点的情况。当在某个节点上调用这个方法时，就会在该节点的后代节点中查找上述两种情况。如果找到了空文本节点，则删除它；如果找到相邻的文本节点，则将它们合并为一个文本节点。</p></li></ul> <h2 id="document-类型"><a href="#document-类型" class="header-anchor">#</a> Document 类型</h2> <p>表示文档。在浏览器中，document 对象是 HTMLDocument（继承自 Document 类型）的一个实例，表示整个 HTML 页面。而且，document 对象是 window 对象的一个属性，因此可以将其作为全局对象来访问。</p> <p>Document 节点具有下列特征：</p> <ul><li>nodeType 的值为 9；</li> <li>nodeName 的值为&quot;#document&quot;；</li> <li>nodeValue 的值为 null；</li> <li>parentNode 的值为 null；</li> <li>ownerDocument 的值为 null；</li> <li>其子节点可能是一个 DocumentType（最多一个）、Element（最多一个）、ProcessingInstruction
或 Comment。</li></ul> <h4 id="_1、文档的子节点"><a href="#_1、文档的子节点" class="header-anchor">#</a> 1、文档的子节点</h4> <p>两个内置的访问其子节点的快捷方式：</p> <ul><li>documentElement 属性</li> <li>通过 childNodes 列表访问文档元素</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span> <span class="token comment">//取得对&lt;html&gt;的引用</span>
<span class="token function">alert</span><span class="token punctuation">(</span>html <span class="token operator">===</span> document<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>html <span class="token operator">===</span> document<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><hr> <p>document 对象还有一个 body 属性，直接指向<code>body</code>元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span> <span class="token comment">//取得对&lt;body&gt;的引用</span>
</code></pre></div><p>Document 另一个可能的子节点是 DocumentType。浏览器对 document.doctype 的支持差别很大，这个属性的用处很有限。</p> <h4 id="_2、文档信息"><a href="#_2、文档信息" class="header-anchor">#</a> 2、文档信息</h4> <p>作为 HTMLDocument 的一个实例，document 对象还有一些标准的 Document 对象所没有的属性。这些属性提供了 document 对象所表现的网页的一些信息。</p> <ul><li><p>title</p> <p>通过这个属性可以取得当前页面的标题，也可以修改当前页面的标题并反映在浏览器的标题栏中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//取得文档标题</span>
<span class="token keyword">var</span> originalTitle <span class="token operator">=</span> document<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
<span class="token comment">//设置文档标题</span>
document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'New page title'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>与网页请求有关的 3 个属性</p> <p>URL、domain 和 referrer。</p> <p>URL 属性中包含页面完整的 URL（即地址栏中显示的 URL），domain 属性中只包含页面的域名，而 referrer 属性中则保存着链接到当前页面的那个页面的 URL。</p> <p>所有这些信息都存在于请求的 HTTP 头部，只不过是通过这些属性让我们能够在 JavaScrip 中访问它们。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//取得完整的 URL</span>
<span class="token keyword">var</span> url <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">;</span>
<span class="token comment">//取得域名</span>
<span class="token keyword">var</span> domain <span class="token operator">=</span> document<span class="token punctuation">.</span>domain<span class="token punctuation">;</span>
<span class="token comment">//取得来源页面的 URL</span>
<span class="token keyword">var</span> referrer <span class="token operator">=</span> document<span class="token punctuation">.</span>referrer<span class="token punctuation">;</span>
</code></pre></div><p>在这 3 个属性中，只有 domain 是可以设置的。但由于安全方面的限制，也并非可以给 domain 设置任何值。如果 URL 中包含一个子域名，例如 p2p.wrox.com，那么就只能将 domain 设置为&quot;wrox.com&quot;（URL 中包含&quot;www&quot;，如 www.wrox.com 时，也是如此）。不能将这个属性设置为 URL 中不包含的域，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//假设页面来自 p2p.wrox.com 域</span>
document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'wrox.com'</span><span class="token punctuation">;</span> <span class="token comment">// 成功</span>
document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'nczonline.net'</span><span class="token punctuation">;</span> <span class="token comment">// 出错！</span>
</code></pre></div><p>浏览器对 domain 属性还有一个限制，即如果域名一开始是“松散的”（loose），那么不能将它再设置为“紧绷的”（tight）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//假设页面来自于 p2p.wrox.com 域</span>
document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'wrox.com'</span><span class="token punctuation">;</span> <span class="token comment">//松散的（成功）</span>
document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'p2p.wrox.com'</span><span class="token punctuation">;</span> <span class="token comment">//紧绷的（出错！）</span>
</code></pre></div></li></ul> <h4 id="_3、查找元素"><a href="#_3、查找元素" class="header-anchor">#</a> 3、查找元素</h4> <ul><li><p>getElementById()</p> <p>接收一个参数：要取得的元素的 ID。如果不存在带有相应 ID 的元素，返回 null。（这里的 ID 会进行严格匹配，包括大小写也需要一致才能匹配上）</p> <p>如果页面中多个元素的 ID 值相同，getElementById()只返回文档中第一次出现的元素。</p></li> <li><p>getElementsByTagName()</p> <p>接受一个参数：要取得元素的标签名。返回的是包含零或多个元素的 NodeList。（在 HTML 文档中，这个方法会返回一个 HTMLCollection 对象，作为一个“动态”集合，该对象与 NodeList 非常类似）</p> <p>例如取得页面中所有的 img 元素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> images <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 执行一些操作</span>
<span class="token function">alert</span><span class="token punctuation">(</span>images<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出图像的数量</span>
<span class="token function">alert</span><span class="token punctuation">(</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出第一个图像元素的 src 特性</span>
<span class="token function">alert</span><span class="token punctuation">(</span>images<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出第一个图像元素的 src 特性</span>
</code></pre></div><p>HTMLCollection 对象还有一个方法，叫做 namedItem()，使用这个方法可以通过元素的 name 特性取得集合中的项。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 假设页面有这个元素 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myimage.gif<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myImage<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取</span>
<span class="token keyword">var</span> myImage <span class="token operator">=</span> images<span class="token punctuation">.</span><span class="token function">namedItem</span><span class="token punctuation">(</span><span class="token string">'myImage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 也可以通过名称查找</span>
<span class="token keyword">var</span> myImage <span class="token operator">=</span> images<span class="token punctuation">[</span><span class="token string">'myImage'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>对 HTMLCollection 而言，我们可以向方括号中传入数值或字符串形式的索引值。在后台，对数值索引就会调用 item()，而对字符串索引就会调用 namedItem()。</p> <hr> <p>取得页面所有的元素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> allElements <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注：虽然标准规定标签名需要区分大小写，但为了最大限度地与既有 HTML 页面兼容，传给 getElementsByTagName()的标签名是不需要区分大小写的。但对于 XML 页面而言（包括 XHTML），getElementsByTagName()方法就会区分大小写。</p></li> <li><p>getElementsByName()</p> <p>HTMLDocument 类型才有的方法，返回带有给定 name 特性的所有元素。最常使用 getElementsByName()方法的情况是取得单选按钮；</p></li></ul> <h4 id="_4、特殊集合"><a href="#_4、特殊集合" class="header-anchor">#</a> 4、特殊集合</h4> <p>除了属性和方法，document 对象还有一些特殊的集合。这些集合都是 HTMLCollection 对象，为访问文档常用的部分提供了快捷方式，包括：</p> <ul><li>document.anchors，包含文档中所有带 name 特性的&lt;a&gt;元素；</li> <li>document.applets，包含文档中所有的&lt;applet&gt;元素，因为不再推荐使用&lt;applet&gt;元素，所以这个集合已经不建议使用了；</li> <li>document.forms，包含文档中所有的&lt;form&gt;元素，与 document.getElementsByTagName(&quot;form&quot;)得到的结果相同；</li> <li>document.images，包含文档中所有的&lt;img&gt;元素，与 document.getElementsByTagName(&quot;img&quot;)得到的结果相同；</li> <li>document.links，包含文档中所有带 href 特性的&lt;a&gt;元素。</li></ul> <h4 id="_5、dom-一致性检测"><a href="#_5、dom-一致性检测" class="header-anchor">#</a> 5、DOM 一致性检测</h4> <p>document.implementation 对象提供了用来检测浏览器实现了 DOM 的哪些部分的方法，hasFeature()。接受两个参数：要检测的 DOM 功能的名称及版本号。如果浏览器支持给定名称和版本的功能，则该方法返回 true：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> hasXmlDom <span class="token operator">=</span> document<span class="token punctuation">.</span>implementation<span class="token punctuation">.</span><span class="token function">hasFeature</span><span class="token punctuation">(</span><span class="token string">'XML'</span><span class="token punctuation">,</span> <span class="token string">'1.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>尽管使用 hasFeature()确实方便，但也有缺点。因为实现者可以自行决定是否与 DOM 规范的不同部分保持一致。事实上，要想让 hasFearture()方法针对所有值都返回 true 很容易，但返回 true 有时候也不意味着实现与规范一致。建议多数情况下，在使用 DOM 的某些特殊的功能之前，最好除了检测 hasFeature()之外，还同时使用能力检测。</p> <h4 id="_6、文档写入"><a href="#_6、文档写入" class="header-anchor">#</a> 6、文档写入</h4> <p>4 个方法：write()、writeln()、open()和 close()。</p> <p>write()和 writeln()方法都接受一个字符串参数，即要写入到输出流中的文本。write()会原样写入，而 writeln()则会在字符串的末尾添加一个换行符（\n）。在页面被加载的过程中，可以使用这两个方法向页面中动态地加入内容：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>document.write() Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      The current date and time is:
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;strong&gt;'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;/strong&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>动态插入 js 外部脚本时，需要添加转义字符\，避免插入的 js 关闭标签被当成外部的关闭标签：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>document.write() Example 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>
        <span class="token string">'&lt;script type=&quot;text/javascript&quot; src=&quot;file.js&quot;&gt;'</span> <span class="token operator">+</span> <span class="token string">'&lt;\/script&gt;'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果在文档加载结束后再调用 document.write()，那么输出的内容将会重写整个页面：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>document.write() Example 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
      This is some content that you won't get to see because it will be
      overwritten.
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>方法 open()和 close()分别用于打开和关闭网页的输出流。如果是在页面加载期间使用 write()或 writeln()方法，则不需要用到这两个方法。</p> <h2 id="element-类型"><a href="#element-类型" class="header-anchor">#</a> Element 类型</h2> <p>Element 节点具有以下特征：</p> <ul><li>nodeType 的值为 1；</li> <li>nodeName 的值为元素的标签名；</li> <li>nodeValue 的值为 null；</li> <li>parentNode 可能是 Document 或 Element；</li> <li>其子节点可能是 Element、Text、Comment、ProcessingInstruction、CDATASection 或 EntityReference。</li></ul> <p>访问元素的标签名，可以使用 nodeName 属性，也可以使用 tagName 属性；这两个属性会返回相同的值（使用后者主要是为了清晰起见）：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;DIV&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>tagName <span class="token operator">==</span> div<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre></div><p>输出结果第二行是大写的 DIV，在 HTML 中，标签名始终都以全部大写表示；而在 XML（有时候也包括 XHTML）中，标签名则始终会与源代码中的保持一致。如果确定不了自己的脚本会在 HTML 还是 XML 文档中执行，最好先转换为相同的大小写形式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>tagName <span class="token operator">==</span> <span class="token string">'div'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//不能这样比较，很容易出错！</span>
  <span class="token comment">//在此执行某些操作</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'div'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//这样最好（适用于任何文档）</span>
  <span class="token comment">//在此执行某些操作</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_1、html-元素"><a href="#_1、html-元素" class="header-anchor">#</a> 1、HTML 元素</h4> <p>所有 HTML 元素都由 HTMLElement 类型表示，不是直接通过这个类型，也是通过它的子类型来表示。HTMLElement 类型直接继承自 Element 并添加了一些属性。添加的这些属性分别对应于每个 HTML 元素中都存在的下列标准特性：</p> <ul><li>id，元素在文档中的唯一标识符。</li> <li>title，有关元素的附加说明信息，一般通过工具提示条显示出来。</li> <li>lang，元素内容的语言代码，很少使用。</li> <li>dir，语言的方向，值为&quot;ltr&quot;（left-to-right，从左至右）或&quot;rtl&quot;（right-to-left，从右至左），也很少使用。</li> <li>className，与元素的 class 特性对应，即为元素指定的 CSS 类。没有将这个属性命名为 class，是因为 class 是 ECMAScript 的保留字。</li></ul> <p>上述这些属性都可以用来取得或修改相应的特性值：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Body text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ltr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取值</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;myDiv&quot;&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;bd&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;Body text&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>lang<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;en&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;ltr&quot;</span>
<span class="token comment">// 赋值</span>
div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'someOtherId'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'ft'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Some other text'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>lang <span class="token operator">=</span> <span class="token string">'fr'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>dir <span class="token operator">=</span> <span class="token string">'rtl'</span><span class="token punctuation">;</span>
</code></pre></div><p>所有 HTML 元素都是由 HTMLElement 或者其更具体的子类型来表示的。下图列出了所有 HTML 元素以及与之关联的类型：</p> <center><img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/10.1.3-1.png" alt=""> <img src="https://mynotes-1257961174.cos.ap-beijing.myqcloud.com/Professional-JavaScript/10.1.3-2.png" alt=""></center> <h4 id="_2、取得特性"><a href="#_2、取得特性" class="header-anchor">#</a> 2、取得特性</h4> <p>每个元素都有一或多个特性，这些特性的用途是给出相应元素或其内容的附加信息。操作特性的 DOM 方法主要有三个，分别是 getAttribute()、setAttribute()和 removeAttribute()。这里取得特性用 getAttribute()。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Body text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ltr<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;myDiv&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;bd&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;Body text&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'lang'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;en&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'dir'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;ltr&quot;</span>
</code></pre></div><p>注意，传递给 getAttribute()的特性名与实际的特性名相同。因此要想得到 class 特性值，应该传入&quot;class&quot;而不是&quot;className&quot;，后者只有在通过对象属性访问特性时才用。如果给定名称的特性不存在，getAttribute()返回 null。</p> <hr> <p>getAttribute()方法也可以取得自定义特性：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">my_special_attribute</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello!<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> value <span class="token operator">=</span> div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'my_special_attribute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取得hello!</span>
</code></pre></div><p>注意：特性的名称是不区分大小写的，即&quot;ID&quot;和&quot;id&quot;代表的都是同一个特性。另外也要注意，根据 HTML5 规范，自定义特性应该加上 data-前缀以便验证。</p> <hr> <p>任何元素的所有特性，也都可以通过 DOM 元素本身的属性来访问。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token attr-name">my_special_attribute</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello!<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;myDiv&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>my_special_attribute<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined（低版本IE除外）</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>align<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
</code></pre></div><hr> <p>有两类特殊的特性，它们虽然有对应的属性名，但属性的值与通过 getAttribute()返回的值并不相同。</p> <ul><li><p>style</p> <p>在通过 getAttribute()访问时，返回的 style 特性值中包含的是 CSS 文本，而通过属性来访问它则会返回一个对象。由于 style 属性是
用于以编程方式访问元素样式的，因此并没有直接映射到 style 特性。</p></li> <li><p>onclick 这样的事件处理程序</p> <p>如果通过 getAttribute()访问，则会返回相应代码的字符串。而在访问 onclick 属性时，则会返回一个 JavaScript 函数（如果未在元素中指定相应特性，则返回 null）。这是因为 onclick 及其他事件处理程序属性本身就应该被赋予函数值。</p></li></ul> <p>由于存在这些差别，在通过 JavaScript 以编程方式操作 DOM 时，开发人员经常不使用 getAttribute()，而是只使用对象的属性。只有在取得自定义特性值的情况下，才会使用 getAttribute()方法。</p> <h4 id="_3、设置特性"><a href="#_3、设置特性" class="header-anchor">#</a> 3、设置特性</h4> <p>setAttribute()方法来设置。接受两个参数：要设置的特性名和值。</p> <p>通过 setAttribute()方法既可以操作 HTML 特性也可以操作自定义特性。通过这个方法设置的特性名会被统一转换为小写形式，即&quot;ID&quot;最终会变成&quot;id&quot;。</p> <p>因为所有特性都是属性，所以直接给属性赋值可以设置特性的值，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'someOtherId'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>align <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
</code></pre></div><p>但是自定义属性不会：</p> <div class="language-js extra-class"><pre class="language-js"><code>div<span class="token punctuation">.</span>mycolor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'mycolor'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//null（IE低版本除外）</span>
</code></pre></div><h4 id="_4、移除特性"><a href="#_4、移除特性" class="header-anchor">#</a> 4、移除特性</h4> <p>removeAttribute()方法。用于彻底删除元素的特性。调用这个方法不仅会清除特性的值，而且也会从元素中完全删除特性。</p> <h4 id="_5、attributes-属性"><a href="#_5、attributes-属性" class="header-anchor">#</a> 5、attributes 属性</h4> <p>Element 类型是使用 attributes 属性的唯一一个 DOM 节点类型。attributes 属性中包含一个 NamedNodeMap，与 NodeList 类似，也是一个“动态”的集合。元素的每一个特性都由一个 Attr 节点表示，每个节点都保存在 NamedNodeMap 对象中。NamedNodeMap 对象拥有下列方法：</p> <ul><li>getNamedItem(name)：返回 nodeName 属性等于 name 的节点；</li> <li>removeNamedItem(name)：从列表中移除 nodeName 属性等于 name 的节点；</li> <li>setNamedItem(node)：向列表中添加节点，以节点的 nodeName 属性为索引；</li> <li>item(pos)：返回位于数字 pos 位置处的节点。</li></ul> <p>如要取得元素的 id 特性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span><span class="token function">getNamedItem</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>
<span class="token comment">// 或者通过方括号语法</span>
<span class="token keyword">var</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>
</code></pre></div><p>也可以设置值：</p> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> <span class="token string">'someOtherId'</span><span class="token punctuation">;</span>
</code></pre></div><p>调用 removeNamedItem()方法与在元素上调用 removeAttribute()方法的效果相同——直接删除具有给定名称的特性。唯一区别是 removeNamedItem()返回表示被删除特性的 Attr 节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> oldAttr <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span><span class="token function">removeNamedItem</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最后 setNamedItem()是一个很不常用的方法，通过这个方法可以为元素添加一个新特性：</p> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span><span class="token function">setNamedItem</span><span class="token punctuation">(</span>newAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>开发人员更多的会使用 getAttribute()、removeAttribute()和 setAttribute()方法，attributes 下的方法在遍历元素的特性时，倒是可以派上用场：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这个函数使用了一个数组来保存名值对，最后再以空格为分隔符将它们拼接起来</span>
<span class="token keyword">function</span> <span class="token function">outputAttributes</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> pairs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    attrName<span class="token punctuation">,</span>
    attrValue<span class="token punctuation">,</span>
    i<span class="token punctuation">,</span>
    len<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    attrName <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">;</span>
    attrValue <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>
    pairs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>attrName <span class="token operator">+</span> <span class="token string">'=&quot;'</span> <span class="token operator">+</span> attrValue <span class="token operator">+</span> <span class="token string">'&quot;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> pairs<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6、创建元素"><a href="#_6、创建元素" class="header-anchor">#</a> 6、创建元素</h4> <p>用 document.createElement()方法。接受一个参数，即要创建元素的标签名。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个div元素</span>
<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置一些值</span>
div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'myNewDiv'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'box'</span><span class="token punctuation">;</span>
<span class="token comment">// 添加到节点树上</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_7、元素的子节点"><a href="#_7、元素的子节点" class="header-anchor">#</a> 7、元素的子节点</h4> <p>元素可以有任意数目的子节点和后代节点，因为元素可以是其他元素的子节点。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>之前 ie 解析这段代码只会认为有 3 个子节点，3 个 li，其他浏览器会认为有 7 个，包括 3 个 li 和 4 个空白符文本节点，所以在遍历节点的时候，一般会检查一下 nodeType 属性，再执行一些操作：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> element<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//执行某些操作</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果想通过某个特定的标签名取得子节点或后代节点，也可以在元素上使用 getElementsByTagName()方法。在通过元素调用这个方法时，除了搜索起点是当前元素之外，其他方面都跟通过 document 调用这个方法相同，因此结果只会返回当前元素的后代。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myList'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> items <span class="token operator">=</span> ul<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="text-类型"><a href="#text-类型" class="header-anchor">#</a> Text 类型</h2> <p>文本节点由 Text 类型表示，包含的是可以照字面解释的纯文本内容。纯文本中可以包含转义后的 HTML 字符，但不能包含 HTML 代码。Text 节点具有以下特征：</p> <ul><li>nodeType 的值为 3；</li> <li>nodeName 的值为&quot;#text&quot;；</li> <li>nodeValue 的值为节点所包含的文本；</li> <li>parentNode 是一个 Element；</li> <li>不支持（没有）子节点。</li></ul> <p>可以通过 nodeValue 属性或 data 属性访问 Text 节点中包含的文本，这两个属性中包含的值相同。对 nodeValue 的修改也会通过 data 反映出来，反之亦然。使用下列方法可以操作节点中的文本：</p> <ul><li>appendData(text)：将 text 添加到节点的末尾。</li> <li>deleteData(offset, count)：从 offset 指定的位置开始删除 count 个字符。</li> <li>insertData(offset, text)：在 offset 指定的位置插入 text。</li> <li>replaceData(offset, count, text)：用 text 替换从 offset 指定的位置开始到 offset+ count 为止处的文本。</li> <li>splitText(offset)：从 offset 指定的位置将当前文本节点分成两个文本节点。</li> <li>substringData(offset, count)：提取从 offset 指定的位置开始到 offset+count 为止处的字符串。</li></ul> <p>除了这些方法之外，文本节点还有一个 length 属性，保存着节点中字符的数目。而且，nodeValue.length 和 data.length 中也保存着同样的值。</p> <hr> <p>在默认情况下，每个可以包含内容的元素最多只能有一个文本节点，而且必须确实有内容存在：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 没有内容，也就没有文本节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 有空格，因而有一个文本节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 有内容，因而有一个文本节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Hello World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以使用下述代码来访问文本的子节点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> textNode <span class="token operator">=</span> div<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span> <span class="token comment">//或者 div.childNodes[0]</span>
</code></pre></div><p>或者进行修改：</p> <div class="language-js extra-class"><pre class="language-js"><code>div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> <span class="token string">'Some other message'</span><span class="token punctuation">;</span>
</code></pre></div><p>注意：字符串会经过 HTML（或 XML，取决于文档类型）编码，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//输出结果是&quot;Some &amp;lt;strong&amp;gt;other&amp;lt;/strong&amp;gt; message&quot;</span>
div<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> <span class="token string">'Some &lt;strong&gt;other&lt;/strong&gt; message'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_1、创建文本节点"><a href="#_1、创建文本节点" class="header-anchor">#</a> 1、创建文本节点</h4> <p>document.createTextNode()方法创建。接受一个参数：要插入节点中的文本。</p> <p>创建一个 div 元素并附加一条文本信息：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'message'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一般情况下，每个元素只有一个文本子节点。不过，在某些情况下也可能包含多个文本子节点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'message'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> anotherTextNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Yippee!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>anotherTextNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果两个文本节点是相邻的同胞节点，那么这两个节点中的文本就会连起来显示，中间不会有空格。</p> <h4 id="_2、规范化文本节点"><a href="#_2、规范化文本节点" class="header-anchor">#</a> 2、规范化文本节点</h4> <p>DOM 文档中存在相邻的同胞文本节点很容易导致混乱，因为分不清哪个文本节点表示哪个字符串。另外，DOM 文档中出现相邻文本节点的情况也不在少数，于是就催生了一个能够将相邻文本节点合并的方法。这个方法是由 Node 类型定义的（因而在所有节点类型中都存在），名叫 normalize()。如果在一个包含两个或多个文本节点的父元素上调用 normalize()方法，则会将所有文本节点合并成一个节点，结果节点的 nodeValue 等于将合并前每个文本节点的 nodeValue 值拼接起来的值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'message'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> anotherTextNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Yippee!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>anotherTextNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>

element<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Hello world!Yippee!&quot;</span>
</code></pre></div><h4 id="_3、分割文本节点"><a href="#_3、分割文本节点" class="header-anchor">#</a> 3、分割文本节点</h4> <p>与 normalize()相反的方法：splitText()。这个方法会将一个文本节点分成两个文本节点，即按照指定的位置分割 nodeValue 值。原来的文本节点将包含从开始到指定位置之前的内容，新文本节点将包含剩下的文本。这个方法会返回一个新文本节点，该节点与原节点的 parentNode 相同。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'message'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> textNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>textNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> newNode <span class="token operator">=</span> element<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">splitText</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;Hello&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>newNode<span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot; world!&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
</code></pre></div><p>分割文本节点是从文本节点中提取数据的一种常用 DOM 解析技术。</p> <h2 id="comment-类型"><a href="#comment-类型" class="header-anchor">#</a> Comment 类型</h2> <p>注释在 DOM 中是通过 Comment 类型来表示的。Comment 节点具有下列特征：</p> <ul><li>nodeType 的值为 8；</li> <li>nodeName 的值为&quot;#comment&quot;；</li> <li>nodeValue 的值是注释的内容；</li> <li>parentNode 可能是 Document 或 Element；</li> <li>不支持（没有）子节点。</li></ul> <p>Comment 类型与 Text 类型继承自相同的基类，因此它拥有除 splitText()之外的所有字符串操作方法。与 Text 类型相似，也可以通过 nodeValue 或 data 属性来取得注释的内容。</p> <p>注释节点可以通过其父节点来访问：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--A comment --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myDiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> comment <span class="token operator">=</span> div<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;A comment&quot;</span>
</code></pre></div><p>使用 document.createComment()创建：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> comment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span><span class="token string">'A comment '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注：此外，浏览器也不会识别位于&lt;/html&gt;标签后面的注释。如果要访问注释节点，一定要保证它们是&lt;html&gt;元素的后代（即位于&lt;html&gt;和&lt;/html&gt;之间）。</p> <h2 id="cdatasection-类型"><a href="#cdatasection-类型" class="header-anchor">#</a> CDATASection 类型</h2> <p>CDATASection 类型只针对基于 XML 的文档，表示的是 CDATA 区域。与 Comment 类似，CDATASection 类型继承自 Text 类型，因此拥有除 splitText()之外的所有字符串操作方法。CDATASection 节点具有下列特征：</p> <ul><li>nodeType 的值为 4；</li> <li>nodeName 的值为&quot;#cdata-section&quot;；</li> <li>nodeValue 的值是 CDATA 区域中的内容；</li> <li>parentNode 可能是 Document 或 Element；</li> <li>不支持（没有）子节点。</li></ul> <p>在真正的 XML 文档中，可以使用 document.createCDataSection()来创建 CDATA 区域，只需为其传入节点的内容即可。</p> <h2 id="documenttype-类型"><a href="#documenttype-类型" class="header-anchor">#</a> DocumentType 类型</h2> <p>包含着与文档的 doctype 有关的所有信息，它具有下列特征：</p> <ul><li>nodeType 的值为 10；</li> <li>nodeName 的值为 doctype 的名称；</li> <li>nodeValue 的值为 null；</li> <li>parentNode 是 Document；</li> <li>不支持（没有）子节点。</li></ul> <p>DOM1 级中，DocumentType 对象不能动态创建，而只能通过解析文档代码的方式来创建。支持它的浏览器会把 DocumentType 对象保存在 document.doctype 中 。 DOM1 级描述了 DocumentType 对象的 3 个属性：name、entities 和 notations。其中，name 表示文档类型的名称；entities 是由文档类型描述的实体的 NamedNodeMap 对象；notations 是由文档类型描述的符号的 NamedNodeMap 对象。通常，浏览器中的文档使用的都是 HTML 或 XHTML 文档类型，因而 entities 和 notations 都是空列表（列表中的项来自行内文档类型声明）。但不管怎样，只有 name 属性是有用的。这个属性中保存的是文档类型的名称，也就是出现在&lt;!DOCTYPE 之后的文本。以下面严格型 HTML 4.01 的文档类型声明为例：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span>
</code></pre></div><p>DocumentType 的 name 属性中保存的就是&quot;HTML&quot;：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>doctype<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;HTML&quot;</span>
</code></pre></div><h2 id="documentfragment-类型"><a href="#documentfragment-类型" class="header-anchor">#</a> DocumentFragment 类型</h2> <p>在所有节点类型中，只有 DocumentFragment 在文档中没有对应的标记。DOM 规定文档片段（document fragment）是一种“轻量级”的文档，可以包含和控制节点，但不会像完整的文档那样占用额外的资源。DocumentFragment 节点具有下列特征：</p> <ul><li>nodeType 的值为 11；</li> <li>nodeName 的值为&quot;#document-fragment&quot;；</li> <li>nodeValue 的值为 null；</li> <li>parentNode 的值为 null；</li> <li>子节点可以是 Element、ProcessingInstruction、Comment、Text、CDATASection 或 EntityReference。</li></ul> <p>要创建文档片段，可以使用 document.createDocumentFragment()方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>文档片段继承了 Node 的所有方法，通常用于执行那些针对文档的 DOM 操作。如果将文档中的节点添加到文档片段中，就会从文档树中移除该节点，也不会从浏览器中再看到该节点。添加到文档片段中的新节点同样也不属于文档树。可以通过 appendChild()或 insertBefore()将文档片段中内容添加到文档中。在将文档片段作为参数传递给这两个方法时，实际上只会将文档片段的所有子节点添加到相应位置上；文档片段本身永远不会成为文档树的一部分。来看下面的 HTML 示例代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>假设我们想为这个<ul>元素添加 3 个列表项。如果逐个地添加列表项，将会导致浏览器反复渲染（呈现）新信息。为避免这个问题，可以像下面这样使用一个文档片段来保存创建的列表项，然后再一次性将它们添加到文档中。</ul></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myList'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> li <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  li<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">'Item '</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="attr-类型"><a href="#attr-类型" class="header-anchor">#</a> Attr 类型</h2> <p>元素的特性在 DOM 中以 Attr 类型来表示。从技术角度讲，特性就是存在于元素的 attributes 属性中的节点。特性节点具有下列特征：</p> <ul><li>nodeType 的值为 2；</li> <li>nodeName 的值是特性的名称；</li> <li>nodeValue 的值是特性的值；</li> <li>parentNode 的值为 null；</li> <li>在 HTML 中不支持（没有）子节点；</li> <li>在 XML 中子节点可以是 Text 或 EntityReference。</li></ul> <p>尽管它们也是节点，但特性却不被认为是 DOM 文档树的一部分。开发人员最常使用的是 getAttribute()、setAttribute()和 remveAttribute()方法，很少直接引用特性节点。</p> <p>Attr 对象有 3 个属性：</p> <ul><li>name 特性名称（与 nodeName 的值相同）</li> <li>value 特性的值（与 nodeValue 的值相同）</li> <li>specified 一个布尔值，用以区别特性是在代码中指定的，还是默认的</li></ul> <p>使用 document.createAttribute()并传入特性的名称可以创建新的特性节点。例如，要为元素添加 align 特性，可以使用下列代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> attr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createAttribute</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
attr<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'left'</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">setAttributeNode</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token string">'align'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getAttributeNode</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'align'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;left&quot;</span>
</code></pre></div><p>注：并不建议直接访问特性节点。实际上，使用 getAttribute()、setAttribute()和 removeAttribute()方法远比操作特性节点更为方便。</p></html></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/4/2020, 5:05:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dist/books/Professional-JavaScript/10/01.html" class="prev">
        简介
      </a></span> <span class="next"><a href="/dist/books/Professional-JavaScript/10/03.html">
        DOM操作技术
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/dist/assets/js/app.7b53bdad.js" defer></script><script src="/dist/assets/js/2.010eff74.js" defer></script><script src="/dist/assets/js/45.0572ad2d.js" defer></script>
  </body>
</html>
