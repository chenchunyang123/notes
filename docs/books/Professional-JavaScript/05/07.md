---
title: '基本包装类型'
---

## 简介

es 提供了 3 个特殊的引用类型：Boolean、Number 和 String。

每当读取一个基本类型值的时候，后台就会创建一个对应的基本包装类型的对象，从而让我们能够调用一些方法来操作这些数据。

例如：

```js
var s1 = 'some text';
var s2 = s1.substring(2);
```

如上，当第二行代码访问 s1 （从内存中读取这个字符串值）时，后台都会自动完成下列处理：

1. 创建 String 类型的一个实例；
2. 在实例上调用指定的方法；
3. 销毁这个实例。

可以想象成执行了下列代码：

```js
var s1 = new String('some text');
var s2 = s1.substring(2);
s1 = null;
```

这三个步骤也适用于 Boolean 和 Number 类型。

<hr>

引用类型与基本包装类型的主要区别就是对象的生存期。使用 new 操作符创建的引用类型的实例，在执行流离开当前作用域之前都一直保存在内存中。而自动创建的基本包装类型的对象，则只存在于一行代码的执行瞬间，然后立即被销毁。

```js
var s1 = 'some text';
s1.color = 'red';
alert(s1.color); //undefined
```

上述代码弹出 undefined 的原因是第二行创建的 String 对象在执行第三行代码时已经被销毁了。第三行代码又创建自己的 String 对象，而该对象没有 color 属性。

<hr>

Object 构造函数也会像工厂方法一样，根据传入值的类型返回相应基本包装类型的实例：

```js
var obj = new Object('some text');
alert(obj instanceof String); //true
```

传入数值参数会得到 Number 的实例，传入布尔值参数就会得到 Boolean 的实例。

<hr>

使用 new 调用基本包装类型的构造函数，与直接调用同名的转型函数是不一样的。

```js
var value = '25';
var number = Number(value); //转型函数
alert(typeof number); //"number"
var obj = new Number(value); //构造函数
alert(typeof obj); //"object", 对基本包装类型的实例调用 typeof 会返回"object"
```

## Boolean 类型

使用构造函数方式创建：

```js
var booleanObject = new Boolean(true);
```

Boolean 类型的实例重写了 valueOf()方法，返回基本类型值 true 或 false；重写了 toString()方法，返回字符串"true"和"false"。

<hr>

Boolean 对象在使用时的问题：

```js
var falseObject = new Boolean(false);
var result = falseObject && true;
alert(result); //true

var falseValue = false;
result = falseValue && true;
alert(result); //false
```

第一个 result 是 true，因为布尔表达式中的所有对象都会被转换为 true，所以 falseObject 就是 true。

<b>基本类型与引用类型的布尔值还有两个区别:</b>

- typeof 操作符对基本类型返回"boolean"，而对引用类型返回"object"。
- 由于 Boolean 对象是 Boolean 类型的实例，所以使用 instanceof 操作符测试 Boolean 对象会返回 true，而测试基本类型的布尔值则返回 false。

```js
alert(typeof falseObject); //object
alert(typeof falseValue); //boolean
alert(falseObject instanceof Boolean); //true
alert(falseValue instanceof Boolean); //false
```

建议永远不要去使用Boolean 对象，使用基本类型的布尔值。

## Number类型


